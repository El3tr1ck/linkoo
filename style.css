/* GERAL E TEMA ESCURO */
:root { /* ... (mesmas variáveis de antes) ... */ }
body { /* ... */ }
.hidden { display: none !important; }
::-webkit-scrollbar { /* ... */ }

/* TELA DE LOGIN */
/* ... (sem alterações) ... */

/* ESTRUTURA PRINCIPAL DO CHAT */
#chat-container { display: flex; height: 100vh; }
#contacts-panel { width: 35%; max-width: 360px; background: var(--primary-surface-color); border-right: 1px solid var(--border-color); display: flex; flex-direction: column; }
#chat-panel { width: 100%; display: flex; flex-direction: column; }

/* PAINEL DE CONTATOS (ESQUERDA) */
.contacts-header { padding: 10px; border-bottom: 1px solid var(--border-color); display: flex; gap: 10px; }
#add-contact-button, #new-group-button { width: 100%; padding: 10px; font-size: 0.9rem; background-color: var(--secondary-surface-color); color: var(--primary-text-color); border: none; border-radius: 6px; cursor: pointer; transition: background-color 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; }
#add-contact-button:hover, #new-group-button:hover { background-color: var(--hover-color); }
#contact-list { flex-grow: 1; overflow-y: auto; }
.contact-item { /* ... */ }

/* PAINEL DE CHAT (DIREITA) - CORREÇÃO DO BUG DE LAYOUT */
.chat-area-content { flex-grow: 1; display: flex; flex-direction: column; height: 100%; }
#chat-welcome-screen { justify-content: center; align-items: center; text-align: center; color: var(--secondary-text-color); }
.chat-header { padding: 10px 20px; border-bottom: 1px solid var(--border-color); background-color: var(--primary-surface-color); display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; }
#chat-header-details { font-size: 0.8rem; color: var(--secondary-text-color); margin-top: -15px; cursor: pointer; }
#chat-header-details:hover { text-decoration: underline; }
.chat-header-options { position: relative; }
.icon-button { background: none; border: none; font-size: 1.3rem; color: var(--secondary-text-color); cursor: pointer; padding: 8px; border-radius: 50%; }
.icon-button:hover { background-color: var(--hover-color); }

/* Área de Mensagens - CORREÇÃO DO BUG DE SCROLL */
#messages-area { flex-grow: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 10px; }
.message-bubble { /* ... */ }
/* ... (Estilos do Markdown sem alterações) ... */

/* Área de Input de Mensagem - CORREÇÃO DO BUG */
.message-input-area { position: relative; display: flex; align-items: center; padding: 10px; background: var(--primary-surface-color); gap: 10px; flex-shrink: 0; }
#message-input { /* ... */ }

/* MENUS DE CONTEXTO */
.context-menu { position: absolute; background: var(--secondary-surface-color); border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); overflow: hidden; z-index: 10; }
#file-options { bottom: 100%; left: 10px; margin-bottom: 5px; }
#chat-options-menu { top: 100%; right: 0; margin-top: 5px; width: 200px; }
.context-menu button { display: flex; align-items: center; gap: 10px; background: none; border: none; padding: 12px; cursor: pointer; text-align: left; width: 100%; color: var(--primary-text-color); transition: background-color 0.2s; }
.context-menu button:hover { background-color: var(--hover-color); }
.context-menu button.danger { color: #ff4d4d; }

/* OVERLAYS (PAINÉIS) */
.overlay { /* ... */ }
.overlay-content { background: var(--primary-surface-color); padding: 20px; border-radius: 8px; width: 90%; max-width: 450px; position: relative; display: flex; flex-direction: column; max-height: 80vh; }
.close-button { /* ... */ }
.overlay-content h3 { margin-top: 0; }
.overlay-content input { width: 100%; box-sizing: border-box; padding: 10px; font-size: 1rem; margin-top: 10px; margin-bottom: 15px; background: var(--secondary-surface-color); color: var(--primary-text-color); border: 1px solid var(--border-color); border-radius: 6px; }
.scrollable-list { overflow-y: auto; flex-grow: 1; }
.list-item { display: flex; align-items: center; gap: 10px; padding: 10px; cursor: pointer; border-radius: 6px; }
.list-item:hover { background-color: var(--hover-color); }
.list-item input[type="checkbox"] { width: 18px; height: 18px; }
